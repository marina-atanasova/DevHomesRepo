{% extends "base.html" %}
{% block title %}All Listings | DevHomes{% endblock %}
{% block content %}
  <h1>All Listings</h1>

  {% if listings %}
    <div class="grid">
      {% for p in listings %}
        <div class="card">
          <h2>{{ p.name }}</h2>
            <p>{{ p.address }}</p>
        <p><strong>City:</strong> {{ p.district.city }}</p>
        <p><strong>District:</strong> {{ p.district }}</p>
          <p><strong>Price:</strong> {{ p.price }} </p>
            {% if p.price_per_sqm %}
                <p><strong>Price / m²:</strong> {{ p.price_per_sqm|floatformat:2 }} EUR/m²</p>
            {% endif %}
            <p><strong>ID:</strong> {{ p.pk }}</p>

          <p><strong>Rooms:</strong> {{ p.rooms }} | <strong>Bedrooms:</strong> {{ p.bedrooms }}</p>
          <p><strong>Bathrooms:</strong> {{ p.bathrooms }} | <strong>Balconies:</strong> {{ p.balconies }}</p>


            <a class="btn" href="{% url 'listings:detail' p.pk %}">Details</a>
            <a class="btn" href="{% url 'listings:edit' p.pk %}">Edit</a>

        </div>
      {% endfor %}
    </div>
  {% else %}
    <div class="card"><p>No listings yet.</p></div>
  {% endif %}
    <div class="pagination">
 <span class="step-links">
    {% if page_obj.has_previous %}
        <a href="?page=1">&laquo; first</a>
        <a href="?page={{ page_obj.previous_page_number }}">previous</a>
    {% endif %}
    <span class="current">
        Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}
    </span>
    {% if page_obj.has_next %}
        <a href="?page={{ page_obj.next_page_number }}">next</a>
        <a href="?page={{ page_obj.paginator.num_pages }}">last &raquo;</a>
    {% endif %}
 </span>
</div>
{% endblock %}
